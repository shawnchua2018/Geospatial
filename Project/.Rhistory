border.lwd = 1)
resale_flat = st_read("data/aspatial/flat.csv")
resale_flat = st_as_sf(resale_flat, coords = c("Longitude", "Latitude"), crs = 3414)
tm_shape(resale_flat)+
tm_bubbles(col = "red",
size = 1,
border.col = "black",
border.lwd = 1)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 0.01)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(resale_flat)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 1000)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(buffer_zone)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 250, 'meter')
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 250)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(buffer_zone)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 250000)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(buffer_zone)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 0.1)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(buffer_zone)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 0.01)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(buffer_zone)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
#buffer_zone <- st_buffer(resale_flat, 0.01)
buffer_zone <- gBuffer(resale_flat, width = 250)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 250, 'meters')
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 0.00225)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(buffer_zone)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 0.01)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(buffer_zone)
tm_shape(mrt)+
tm_bubbles(col = "red",
size = 1,
border.col = "black",
border.lwd = 1)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 0.01)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
st_crs(resale_flat)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, dist=250, nQuadSegs = 30)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(buffer_zone)
View(buffer_zone)
View(resale_flat)
packages = c('sp', 'rgdal', 'rgeos', 'sf', 'tidyverse', 'olsrr', 'corrplot', 'ggpubr', 'sf', 'spdep', 'GWmodel', 'tmap', 'tidyverse', 'raster')
for (p in packages){
if(!require(p, character.only = T)){
install.packages(p)
}
library(p,character.only = T)
}
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
sp_resale <- as_Spatial(sf_resale_flat)
coordinates(resale_flat) <- c("Latitude", "Longitude")
View(resale_flat)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
p <- SpatialPoints(data.frame(resale_flat$Longitude, resale_flat$Latitude), proj4string = CRS("+init=epsg:3414"))
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
p <- SpatialPoints(data.frame(resale_flat$Longitude, resale_flat$Latitude), proj4string = CRS("+init=epsg:3414"))
p <- spTransform(p, CRS("+init=epsg:3414"))
View(p)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
p <- SpatialPoints(data.frame(resale_flat$Longitude, resale_flat$Latitude), proj4string = CRS("+init=epsg:3414"))
p <- spTransform(p, CRS("+init=epsg:3414"))
seqx <- seq(min(p@coords[,1]), max(p@coords[,1]), by = 1000)
seqy <- seq(min(p@coords[,2]), max(p@coords[,2]), by = 1000)
pgrid <- expand.grid(seqx, seqy)
pgrid <- SpatialPoints(pgrid, proj4string = CRS("+init=epsg:3414"))
pgrid <- spTransform(pgrid, CRS("+init=epsg:3414"))
pgrid <- data.frame(pgrid@coords)
names(pgrid) <- c('lon', 'lat')
View(pgrid)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, -resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
View(cord.dec)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, -resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
View(cord.dec)
View(cord.UTM)
View(cord.UTM)
plot(cord.UTM)
preschool = st_read("data/geospatial/pre-schools-location-kml.kml")
hawkercenter = st_read("data/geospatial/hawker-centres-kml.kml")
cc = st_read("data/geospatial/community-clubs-kml.kml")
parks = st_read("data/geospatial/nparks-parks-kml.kml")
supermarket = st_read("data/geospatial/supermarkets-kml.kml")
sport_facilities = st_read("data/geospatial/sportsg-sport-facilities-kml.kml")
sf_mpsz2019 = st_read("data/geospatial/master-plan-2019-subzone-boundary-no-sea-kml.kml")
plot(cord.UTM)
plot(sf_mpsz2019)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
plot(cord.UTM)
plot(sf_mpsz2019)
View(cc)
View(cord.UTM)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
View(parks)
View(new_coords)
View(new_coords)
View(new_coords)
View(sf_mpsz2019)
View(supermarket)
View(sport_facilities)
View(preschool)
mrt <- shapefile("data/geospatial/MRTLRTStnPtt.shp")
mrt <- st_as_sf(mrt, coords = c("XCOORD", "YCOORD"), crs=3414)
mrt <- st_transform(mrt,3414)
st_crs(mrt)
st_is_longlat(mrt)
View(mrt)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
new_coords <- new_coords %>%
rename(
coords.x1 = X,
coords.x2 = Y
)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
new_coords <- new_coords %>%
rename(
`coords.x1` = 'X',
`coords.x2` = 'Y'
)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
new_coords <- new_coords %>%
rename(
coords.x1 = 'X',
coords.x2 = 'Y'
)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(
coords.x1 = 'X',
coords.x2 = 'Y'
)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
names(new_coords)[names(new_coords) == "X"] <- "coord.x1"
View(new_coords)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
names(new_coords)[names(new_coords) == "coord.x1"] <- "X"
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- rbind(resale_flat, new_coords)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- merge(resale_flat,new_coords)
View(resale_flat)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- full_join(resale_flat, new_coords)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- full_join(resale_flat, new_coords, by = character())
View(resale_flat)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- merge(resale_flat, new_coords, all=TRUE)
View(resale_flat)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- cbind(resale_flat, "X" = new_coords[1], "Y" = new_coords[2])
resale_flat = st_read("data/aspatial/Resale_flats_compiled.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("latitude","longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$latitude)
resale_flat$Longitude <- as.numeric(resale_flat$longitude)
cord.dec = SpatialPoints(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
resale_flat = st_read("data/aspatial/Resale_flats_compiled.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("latitude","longitude"),crs= 3414)
resale_flat$latitude <- as.numeric(resale_flat$latitude)
resale_flat$longitude <- as.numeric(resale_flat$longitude)
cord.dec = SpatialPoints(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- cbind(resale_flat, "X" = new_coords[1], "Y" = new_coords[2])
View(resale_flat)
resale_flat = st_read("data/aspatial/Resale_flats_compiled.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("latitude","longitude"),crs= 3414)
resale_flat$latitude <- as.numeric(resale_flat$latitude)
resale_flat$longitude <- as.numeric(resale_flat$longitude)
cord.dec = SpatialPoints(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- cbind(resale_flat, "X" = new_coords[1], "Y" = new_coords[2])
resale_flat = st_read("data/aspatial/Resale_flats_compiled.csv")
resale_flat$latitude <- as.numeric(resale_flat$latitude)
resale_flat$longitude <- as.numeric(resale_flat$longitude)
cord.dec = SpatialPoints(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- cbind(resale_flat, "X" = new_coords[1], "Y" = new_coords[2])
sf_resale_flat <- st_as_sf(resale_flat, coords = c("X","Y"),crs= 3414)
View(sf_resale_flat)
mrt <- shapefile("data/geospatial/MRTLRTStnPtt.shp")
mrt <- st_as_sf(mrt, coords = c("XCOORD", "YCOORD"), crs=3414)
mrt <- st_transform(mrt,3414)
st_crs(mrt)
st_is_longlat(mrt)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(sf_resale_flat, 250)
sf_resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(sf_resale_flat)
View(cord.UTM)
View(new_coords)
View(resale_flat)
tm_shape(sf_resale_flat)+
tm_bubbles(col = "red",
size = 1,
border.col = "black",
border.lwd = 1)
View(cord.dec)
cord.dec
View(cord.dec)
View(cord.dec)
resale_flat = st_read("data/aspatial/Resale_flats_compiled.csv")
resale_flat$latitude <- as.numeric(resale_flat$latitude)
resale_flat$longitude <- as.numeric(resale_flat$longitude)
#cord.dec = SpatialPoints(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
cord.dec = asSpatial(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
resale_flat = st_read("data/aspatial/Resale_flats_compiled.csv")
resale_flat$latitude <- as.numeric(resale_flat$latitude)
resale_flat$longitude <- as.numeric(resale_flat$longitude)
#cord.dec = SpatialPoints(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
cord.dec = as_Spatial(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
school = st_read("data/aspatial/Schools.csv")
packages = c('sp', 'rgdal', 'rgeos', 'sf', 'tidyverse', 'olsrr', 'corrplot', 'ggpubr', 'sf', 'spdep', 'GWmodel', 'tmap', 'tidyverse', 'raster')
for (p in packages){
if(!require(p, character.only = T)){
install.packages(p)
}
library(p,character.only = T)
}
resale_flat = st_read("data/aspatial/Resale_flats_compiled.csv")
resale_flat$latitude <- as.numeric(resale_flat$latitude)
resale_flat$longitude <- as.numeric(resale_flat$longitude)
cord.dec = SpatialPoints(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- cbind(resale_flat, "X" = new_coords[1], "Y" = new_coords[2])
sf_resale_flat <- st_as_sf(resale_flat, coords = c("X","Y"),crs= 3414)
school = st_read("data/aspatial/Schools.csv")
school$latitude <- as.numeric(school$latitude)
school$longitude <- as.numeric(school$longitude)
cord.dec.sch = SpatialPoints(cbind(school$longitude, school$latitude), proj4string=CRS("+proj=longlat"))
View(school)
View(cord.dec)
school = st_read("data/aspatial/Schools.csv")
school$latitude <- as.numeric(school$latitude)
school$longitude <- as.numeric(school$longitude)
cord.dec.sch = SpatialPoints(cbind(school$longitude, school$latitude), proj4string=CRS("+proj=longlat"))
school = st_read("data/aspatial/Schools.csv")
school$latitude <- as.numeric(school$latitude)
school$longitude <- as.numeric(school$longitude)
cord.dec.sch = SpatialPoints(cbind(school$longitude, school$latitude), proj4string=CRS("+proj=longlat"))
cord.UTM.sch <- spTransform(cord.dec.sch, CRS("+init=epsg:3414"))
cord.UTM.sch
new_coords_sch <- data.frame(cord.UTM.sch@coords)
summary(new_coords_sch)
new_coords_sch <- new_coords_sch %>%
rename(X = coords.x1, Y = coords.x2)
school <- cbind(school, "X" = new_coords[1], "Y" = new_coords[2])
View(school)
school = st_read("data/aspatial/Schools.csv")
school$latitude <- as.numeric(school$latitude)
school$longitude <- as.numeric(school$longitude)
cord.dec.sch = SpatialPoints(cbind(school$longitude, school$latitude), proj4string=CRS("+proj=longlat"))
cord.UTM.sch <- spTransform(cord.dec.sch, CRS("+init=epsg:3414"))
cord.UTM.sch
new_coords_sch <- data.frame(cord.UTM.sch@coords)
summary(new_coords_sch)
new_coords_sch <- new_coords_sch %>%
rename(X = coords.x1, Y = coords.x2)
school <- cbind(school, "X" = new_coords_sch[1], "Y" = new_coords_sch[2])
sf_school <- st_as_sf(school, coords = c("X","Y"),crs= 3414)
View(sf_school)
mall = st_read("data/aspatial/Shopping_Malls.csv")
mall$latitude <- as.numeric(mall$latitude)
mall$longitude <- as.numeric(mall$longitude)
cord.dec.mall = SpatialPoints(cbind(mall$longitude, mall$latitude), proj4string=CRS("+proj=longlat"))
cord.UTM.mall <- spTransform(cord.dec.mall, CRS("+init=epsg:3414"))
cord.UTM.mall
new_coords_mall <- data.frame(cord.UTM.mall@coords)
summary(new_coords_mall)
new_coords_mall <- new_coords_mall %>%
rename(X = coords.x1, Y = coords.x2)
mall <- cbind(mall, "X" = new_coords_mall[1], "Y" = new_coords_mall[2])
sf_mall <- st_as_sf(mall, coords = c("X","Y"),crs= 3414)
View(sf_mall)
