tm_shape(sport_facilities_svy21)+
tm_polygons()
#st_crs(resale_flat)
#st_crs(mrt)
#prox_count(500, mrt)
#tm_shape(resale_flat)+
#tm_bubbles(col = "red",
#size = 1,
#border.col = "black",
#border.lwd = 1)
plot(st_geometry(sport_facilities_svy21))
#st_crs(resale_flat)
#st_crs(mrt)
#prox_count(500, mrt)
#tm_shape(resale_flat)+
#tm_bubbles(col = "red",
#size = 1,
#border.col = "black",
#border.lwd = 1)
ggplot()+
geom_sf(data = mrt)
packages = c('sp', 'rgdal', 'rgeos', 'sf', 'tidyverse', 'olsrr', 'corrplot', 'ggpubr', 'sf', 'spdep', 'GWmodel', 'tmap', 'tidyverse', 'raster')
for (p in packages){
if(!require(p, character.only = T)){
install.packages(p)
}
library(p,character.only = T)
}
resale_flat = st_read("data/aspatial/flat.csv")
resale_flat = st_read("data/aspatial/flat.csv")
resale_flat = st_as_sf(resale_flat, coords = c("longitude", "latitude"), crs = 3414, agr = "constant")
View(resale_flat)
resale_flat = st_read("data/aspatial/flat.csv")
resale_flat = st_as_sf(resale_flat, coords = c("Latitude", "Longitude"), crs = 3414)
preschool = st_read("data/geospatial/pre-schools-location-kml.kml")
hawkercenter = st_read("data/geospatial/hawker-centres-kml.kml")
cc = st_read("data/geospatial/community-clubs-kml.kml")
parks = st_read("data/geospatial/nparks-parks-kml.kml")
supermarket = st_read("data/geospatial/supermarkets-kml.kml")
sport_facilities = st_read("data/geospatial/sportsg-sport-facilities-kml.kml")
sf_mpsz2019 = st_read("data/geospatial/master-plan-2019-subzone-boundary-no-sea-kml.kml")
mrt <- shapefile("data/geospatial/MRTLRTStnPtt.shp")
mrt <- st_as_sf(mrt, coords = c("XCOORD", "YCOORD"), crs=3414)
mrt <- st_transform(mrt,3414)
st_crs(mrt)
preschool_svy21 <- st_transform(preschool,3414)
st_crs(preschool_svy21)
hawkercenter_svy21 <- st_transform(hawkercenter, 3414)
st_crs(hawkercenter_svy21)
cc_svy21 <- st_transform(cc, 3414)
st_crs(cc_svy21)
parks_svy21 <- st_transform(parks, 3414)
st_crs(parks_svy21)
supermarket_svy21 <- st_transform(supermarket, 3414)
st_crs(supermarket_svy21)
sport_facilities_svy21 <- st_transform(sport_facilities, 3414)
st_crs(sport_facilities_svy21)
mpsz2019_svy21 <- st_transform(sf_mpsz2019, 3414)
st_crs(mpsz2019_svy21)
tm_shape(resale_flat)+
tm_bubbles(col = "red",
#size = 1,
#border.col = "black",
#border.lwd = 1)
tm_shape(resale_flat)+
tm_bubbles(col = "red",
size = 1,
border.col = "black",
border.lwd = 1)
resale_flat = st_read("data/aspatial/flat.csv")
resale_flat = st_as_sf(resale_flat, coords = c("Longitude", "Latitude"), crs = 3414)
tm_shape(resale_flat)+
tm_bubbles(col = "red",
size = 1,
border.col = "black",
border.lwd = 1)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 0.01)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(resale_flat)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 1000)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(buffer_zone)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 250, 'meter')
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 250)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(buffer_zone)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 250000)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(buffer_zone)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 0.1)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(buffer_zone)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 0.01)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(buffer_zone)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
#buffer_zone <- st_buffer(resale_flat, 0.01)
buffer_zone <- gBuffer(resale_flat, width = 250)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 250, 'meters')
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 0.00225)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(buffer_zone)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 0.01)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(buffer_zone)
tm_shape(mrt)+
tm_bubbles(col = "red",
size = 1,
border.col = "black",
border.lwd = 1)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, 0.01)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
st_crs(resale_flat)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(resale_flat, dist=250, nQuadSegs = 30)
resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(buffer_zone)
View(buffer_zone)
View(resale_flat)
packages = c('sp', 'rgdal', 'rgeos', 'sf', 'tidyverse', 'olsrr', 'corrplot', 'ggpubr', 'sf', 'spdep', 'GWmodel', 'tmap', 'tidyverse', 'raster')
for (p in packages){
if(!require(p, character.only = T)){
install.packages(p)
}
library(p,character.only = T)
}
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
sp_resale <- as_Spatial(sf_resale_flat)
coordinates(resale_flat) <- c("Latitude", "Longitude")
View(resale_flat)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
p <- SpatialPoints(data.frame(resale_flat$Longitude, resale_flat$Latitude), proj4string = CRS("+init=epsg:3414"))
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
p <- SpatialPoints(data.frame(resale_flat$Longitude, resale_flat$Latitude), proj4string = CRS("+init=epsg:3414"))
p <- spTransform(p, CRS("+init=epsg:3414"))
View(p)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
p <- SpatialPoints(data.frame(resale_flat$Longitude, resale_flat$Latitude), proj4string = CRS("+init=epsg:3414"))
p <- spTransform(p, CRS("+init=epsg:3414"))
seqx <- seq(min(p@coords[,1]), max(p@coords[,1]), by = 1000)
seqy <- seq(min(p@coords[,2]), max(p@coords[,2]), by = 1000)
pgrid <- expand.grid(seqx, seqy)
pgrid <- SpatialPoints(pgrid, proj4string = CRS("+init=epsg:3414"))
pgrid <- spTransform(pgrid, CRS("+init=epsg:3414"))
pgrid <- data.frame(pgrid@coords)
names(pgrid) <- c('lon', 'lat')
View(pgrid)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, -resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
View(cord.dec)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, -resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
View(cord.dec)
View(cord.UTM)
View(cord.UTM)
plot(cord.UTM)
preschool = st_read("data/geospatial/pre-schools-location-kml.kml")
hawkercenter = st_read("data/geospatial/hawker-centres-kml.kml")
cc = st_read("data/geospatial/community-clubs-kml.kml")
parks = st_read("data/geospatial/nparks-parks-kml.kml")
supermarket = st_read("data/geospatial/supermarkets-kml.kml")
sport_facilities = st_read("data/geospatial/sportsg-sport-facilities-kml.kml")
sf_mpsz2019 = st_read("data/geospatial/master-plan-2019-subzone-boundary-no-sea-kml.kml")
plot(cord.UTM)
plot(sf_mpsz2019)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
plot(cord.UTM)
plot(sf_mpsz2019)
View(cc)
View(cord.UTM)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
View(parks)
View(new_coords)
View(new_coords)
View(new_coords)
View(sf_mpsz2019)
View(supermarket)
View(sport_facilities)
View(preschool)
mrt <- shapefile("data/geospatial/MRTLRTStnPtt.shp")
mrt <- st_as_sf(mrt, coords = c("XCOORD", "YCOORD"), crs=3414)
mrt <- st_transform(mrt,3414)
st_crs(mrt)
st_is_longlat(mrt)
View(mrt)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
new_coords <- new_coords %>%
rename(
coords.x1 = X,
coords.x2 = Y
)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
new_coords <- new_coords %>%
rename(
`coords.x1` = 'X',
`coords.x2` = 'Y'
)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
new_coords <- new_coords %>%
rename(
coords.x1 = 'X',
coords.x2 = 'Y'
)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(
coords.x1 = 'X',
coords.x2 = 'Y'
)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
names(new_coords)[names(new_coords) == "X"] <- "coord.x1"
View(new_coords)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
names(new_coords)[names(new_coords) == "coord.x1"] <- "X"
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- rbind(resale_flat, new_coords)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- merge(resale_flat,new_coords)
View(resale_flat)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- full_join(resale_flat, new_coords)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- full_join(resale_flat, new_coords, by = character())
View(resale_flat)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- merge(resale_flat, new_coords, all=TRUE)
View(resale_flat)
resale_flat = st_read("data/aspatial/flat.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("Latitude","Longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$Latitude)
resale_flat$Longitude <- as.numeric(resale_flat$Longitude)
cord.dec = SpatialPoints(cbind(resale_flat$Longitude, resale_flat$Latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- cbind(resale_flat, "X" = new_coords[1], "Y" = new_coords[2])
resale_flat = st_read("data/aspatial/Resale_flats_compiled.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("latitude","longitude"),crs= 3414)
resale_flat$Latitude <- as.numeric(resale_flat$latitude)
resale_flat$Longitude <- as.numeric(resale_flat$longitude)
cord.dec = SpatialPoints(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
resale_flat = st_read("data/aspatial/Resale_flats_compiled.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("latitude","longitude"),crs= 3414)
resale_flat$latitude <- as.numeric(resale_flat$latitude)
resale_flat$longitude <- as.numeric(resale_flat$longitude)
cord.dec = SpatialPoints(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- cbind(resale_flat, "X" = new_coords[1], "Y" = new_coords[2])
View(resale_flat)
resale_flat = st_read("data/aspatial/Resale_flats_compiled.csv")
sf_resale_flat <- st_as_sf(resale_flat, coords = c("latitude","longitude"),crs= 3414)
resale_flat$latitude <- as.numeric(resale_flat$latitude)
resale_flat$longitude <- as.numeric(resale_flat$longitude)
cord.dec = SpatialPoints(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- cbind(resale_flat, "X" = new_coords[1], "Y" = new_coords[2])
resale_flat = st_read("data/aspatial/Resale_flats_compiled.csv")
resale_flat$latitude <- as.numeric(resale_flat$latitude)
resale_flat$longitude <- as.numeric(resale_flat$longitude)
cord.dec = SpatialPoints(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
cord.UTM <- spTransform(cord.dec, CRS("+init=epsg:3414"))
cord.UTM
new_coords <- data.frame(cord.UTM@coords)
summary(new_coords)
new_coords <- new_coords %>%
rename(X = coords.x1, Y = coords.x2)
resale_flat <- cbind(resale_flat, "X" = new_coords[1], "Y" = new_coords[2])
sf_resale_flat <- st_as_sf(resale_flat, coords = c("X","Y"),crs= 3414)
View(sf_resale_flat)
mrt <- shapefile("data/geospatial/MRTLRTStnPtt.shp")
mrt <- st_as_sf(mrt, coords = c("XCOORD", "YCOORD"), crs=3414)
mrt <- st_transform(mrt,3414)
st_crs(mrt)
st_is_longlat(mrt)
#prox_count <- function(slider_value, variable) {
#buffer_zone <- st_buffer(resale_flat, slider_value)
#resale_flat <- lengths(st_intersects(buffer_zone, variable))
#}
buffer_zone <- st_buffer(sf_resale_flat, 250)
sf_resale_flat$count <- lengths(st_intersects(buffer_zone, mrt))
View(sf_resale_flat)
View(cord.UTM)
View(new_coords)
View(resale_flat)
tm_shape(sf_resale_flat)+
tm_bubbles(col = "red",
size = 1,
border.col = "black",
border.lwd = 1)
View(cord.dec)
cord.dec
View(cord.dec)
View(cord.dec)
resale_flat = st_read("data/aspatial/Resale_flats_compiled.csv")
resale_flat$latitude <- as.numeric(resale_flat$latitude)
resale_flat$longitude <- as.numeric(resale_flat$longitude)
#cord.dec = SpatialPoints(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
cord.dec = asSpatial(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
resale_flat = st_read("data/aspatial/Resale_flats_compiled.csv")
resale_flat$latitude <- as.numeric(resale_flat$latitude)
resale_flat$longitude <- as.numeric(resale_flat$longitude)
#cord.dec = SpatialPoints(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
cord.dec = as_Spatial(cbind(resale_flat$longitude, resale_flat$latitude), proj4string=CRS("+proj=longlat"))
